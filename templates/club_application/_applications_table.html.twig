<div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Licencié</th>
                <th>Date de demande</th>
                <th>Statut</th>
                <th>Traité par</th>
                {% if showActions is defined and showActions %}
                    <th class="text-end">Actions</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for application in applications %}
                <tr>
                    <td>
                        <strong>{{ application.licensee.firstname }} {{ application.licensee.lastname }}</strong>
                        {% if application.licensee.user %}
                            <br>
                            <small class="text-muted">{{ application.licensee.user.email }}</small>
                        {% endif %}
                    </td>
                    <td>{{ application.createdAt|date('d/m/Y H:i') }}</td>
                    <td>
                        {% if application.isPending %}
                            <span class="badge bg-warning text-dark">
                                <em class="fa-solid fa-clock me-1"></em>
                                En attente
                            </span>
                        {% elseif application.isValidated %}
                            <span class="badge bg-success">
                                <em class="fa-solid fa-check me-1"></em>
                                Validée
                            </span>
                        {% elseif application.isOnWaitingList %}
                            <span class="badge bg-info">
                                <em class="fa-solid fa-hourglass-half me-1"></em>
                                Liste d'attente
                            </span>
                        {% elseif application.isRejected %}
                            <span class="badge bg-danger">
                                <em class="fa-solid fa-times me-1"></em>
                                Refusée
                            </span>
                        {% elseif application.isCancelled %}
                            <span class="badge bg-secondary">
                                <em class="fa-solid fa-ban me-1"></em>
                                Annulée
                            </span>
                        {% endif %}
                    </td>
                    <td>
                        {% if application.processedBy %}
                            {{ application.processedBy.firstname }} {{ application.processedBy.lastname }}
                            <br>
                            <small class="text-muted">{{ application.updatedAt|date('d/m/Y H:i') }}</small>
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    {% if showActions is defined and showActions %}
                        <td class="text-end">
                            <div class="btn-group btn-group-sm">
                                <a href="{{ path('app_club_application_validate', { id: application.id }) }}"
                                   class="btn btn-success" title="Valider" data-bs-toggle="tooltip">
                                    <em class="fa-solid fa-check"></em>
                                </a>
                                <a href="{{ path('app_club_application_waiting_list', { id: application.id }) }}"
                                   class="btn btn-info" title="Mettre en liste d'attente" data-bs-toggle="tooltip">
                                    <em class="fa-solid fa-hourglass-half"></em>
                                </a>
                                <a href="{{ path('app_club_application_reject', { id: application.id }) }}" 
                                   class="btn btn-danger" title="Refuser" data-bs-toggle="tooltip">
                                    <em class="fa-solid fa-times"></em>
                                </a>
                            </div>
                        </td>
                    {% endif %}
                </tr>
                {% if application.adminMessage %}
                    <tr>
                        <td colspan="{{ showActions ? 5 : 4 }}" class="bg-light">
                            <div class="alert alert-secondary mb-0">
                                <strong>Message :</strong> {{ application.adminMessage }}
                            </div>
                        </td>
                    </tr>
                {% endif %}
            {% endfor %}
        </tbody>
    </table>
</div>

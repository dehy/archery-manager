{% extends 'base.html.twig' %}

{% block title %}Créer un licencié{% endblock %}

{% block body %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0">
                        <em class="fa-solid fa-user-plus me-2"></em>
                        Créer un nouveau licencié
                    </h3>
                </div>
                <div class="card-body">
                    <p class="lead">Comment souhaitez-vous créer le licencié ?</p>

                    <form method="post" action="{{ path('app_licensee_new_choice') }}">
                        <div class="mb-4">
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="radio" name="choice" id="choice_sync" value="sync" required>
                                <label class="form-check-label" for="choice_sync">
                                    <strong>Synchroniser depuis la FFTA</strong>
                                    <small class="d-block text-muted">Les informations seront récupérées automatiquement</small>
                                </label>
                            </div>

                            <div id="ffta_code_field" class="ms-4 mb-3" style="display: none;">
                                <label for="ffta_member_code" class="form-label">Code licence FFTA</label>
                                <input type="text" class="form-control" id="ffta_member_code" name="ffta_member_code" 
                                       placeholder="8 caractères" maxlength="8" pattern="[A-Z0-9]{8}">
                            </div>

                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="choice" id="choice_manual" value="manual" required>
                                <label class="form-check-label" for="choice_manual">
                                    <strong>Créer manuellement</strong>
                                    <small class="d-block text-muted">Saisir toutes les informations à la main</small>
                                </label>
                            </div>
                        </div>

                        <div class="d-flex justify-content-between">
                            <a href="{{ path('app_licensee_index') }}" class="btn btn-secondary">
                                <em class="fa-solid fa-arrow-left me-2"></em>
                                Annuler
                            </a>
                            <button type="submit" class="btn btn-primary">
                                Suivant
                                <em class="fa-solid fa-arrow-right ms-2"></em>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const syncRadio = document.getElementById('choice_sync');
    const manualRadio = document.getElementById('choice_manual');
    const fftaField = document.getElementById('ffta_code_field');
    const fftaInput = document.getElementById('ffta_member_code');

    function updateFftaField() {
        if (syncRadio.checked) {
            fftaField.style.display = 'block';
            fftaInput.required = true;
        } else {
            fftaField.style.display = 'none';
            fftaInput.required = false;
        }
    }

    syncRadio.addEventListener('change', updateFftaField);
    manualRadio.addEventListener('change', updateFftaField);
    updateFftaField();
});
</script>
{% endblock %}
